<Window x:Class="TabStickies.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TabStickies"
        mc:Ignorable="d"
        Title="Sticker" Height="400" Width="600"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        ResizeMode="CanResizeWithGrip"
        Topmost="{Binding AlwaysOnTop}"
        Loaded="Window_Loaded" MouseDown="Window_MouseDown" KeyDown="Window_KeyDown">
    <!-- Тень -->
    <Window.Resources>
        <DropShadowEffect x:Key="StickerShadow"
                          BlurRadius="8"
                          ShadowDepth="12"
                          Color="#66000000" />
    </Window.Resources>
    <!-- Основной скруглённый контейнер -->
    <Border CornerRadius="12" Padding="0" Effect="{StaticResource StickerShadow}">
        <Border.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFCCFF90" Offset="0.0" />
                <GradientStop Color="White" Offset="1.0" />
            </LinearGradientBrush>
        </Border.Background>

        <Grid>
            <!-- Область содержимого (ниже вкладок) -->
            <Border Margin="0,40,0,30">
                <TextBox x:Name="ContentEditor"
                     AcceptsReturn="True"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"
                     Background="Transparent" 
                     BorderBrush="Gray"
                     BorderThickness="1"
                     FontSize="14"
                     Margin="5"
                     TextChanged="ContentEditor_TextChanged"/>
            </Border>

            <!-- Вкладки с улучшенной прокруткой -->
            <ScrollViewer HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Hidden"
              Height="50"
              VerticalAlignment="Top"
              PanningMode="HorizontalOnly"
              PanningDeceleration="100">
                <StackPanel x:Name="TabsPanel"
                Orientation="Horizontal"
                Margin="5,5,5,0"
                Height="40"/>
            </ScrollViewer>

            <!-- Кнопки управления -->
            <StackPanel HorizontalAlignment="Right" VerticalAlignment="Bottom" Orientation="Horizontal" Margin="0,0,5,5">
                <Button Content="+" Click="AddTab_Click" Width="25" Height="25" Padding="0"/>
                <Button Content="💾" Click="SaveButton_Click" Width="30" Height="25" Margin="5,0,0,0" Padding="0"/>
                <Button Content="X" Click="CloseButton_Click" Width="30" Height="25" Margin="5,0,0,0" Padding="0"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
